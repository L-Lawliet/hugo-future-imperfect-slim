<!--[if IE]>
  <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
<![endif]-->
{{ if eq hugo.Environment "development" }}
  {{ partial "theme-notification" . }}
{{ end }}
<header id="site-header" class="site-header" >
  <div class="navbar">
    <h1 class="nav-title">
      <a href="{{ '/' | relLangURL }}">
        {{ if or .IsHome (not .Site.Params.header.dynamicTitles) }}
          {{ .Site.Params.header.navbarTitle  | safeHTML }}
        {{ else }}
          {{ i18n .Section | default .Title }}
        {{ end }}
      </a>
    </h1>
    <nav id="site-nav" class="flyout-menu nav-menu">
      {{ range .Site.Menus.main }}
        {{ if and (gt (len (findRE "fa[rsb]( fa-([a-z-]+))+" .Identifier)) 0) (not .Pre) }}
          {{/* Old syntax: use '.Identifier' for icon rendering */}}
          <a href="{{ .URL | relLangURL }}" class="nav-link"><i class="{{ .Identifier }}"></i>{{ .Name }}</a>
        {{ else }}
          {{/* New syntax: use '.Pre' for icon rendering */}}
          <a href="{{ .URL | relLangURL }}" class="nav-link">{{ .Pre | safeHTML}}{{ .Name }}</a>
        {{ end }}
      {{ end }}
      <div class="nav-buttons">
      {{ if .Site.Params.header.searchMenu }}<button class="nav-link search-button"><i class="fas fa-search"></i>Search</button>{{ end }}{{ if .Site.Params.header.shareMenu }}
      <button class="nav-link share-button"><i class="fas fa-share-alt"></i>Share</button>{{ end }}
      {{ if .Site.Params.header.languageMenu }}<button class="nav-link lang-button" lang="{{ .Site.Language.Lang }}"><span class="sr-only">Current Language:</span><i>{{ .Site.Language.Lang }}</i>Language</button>{{ end }}
      </div>
    </nav>
    <div class="nav-buttons">
    {{ if .Site.Params.header.searchMenu }}<button class="toggle search-button"><i class="fas fa-search"></i><span class="sr-only">Open Search Menu</span></button>{{ end }}
    {{ if .Site.Params.header.shareMenu }}<button class="toggle share-button"><i class="fas fa-share-alt"></i><span class="sr-only">Open Share Menu</span></button>{{ end }}
      {{ if .Site.Params.header.languageMenu }}<button class="toggle lang-button" lang="{{ .Site.Language.Lang }}"><span class="sr-only">Open Language Menu. Current Language:</span>{{ .Site.Language.Lang }}</button>{{ end }}
        <button class="toggle nav-button"><i class="fas fa-bars"></i><span class="sr-only">Open Navigation Menu</span></button>
    </div>
  </div>
  {{- if .Site.Params.header.searchMenu -}}
    <menu id="search" class="search-box">
      <input id="search-input" class="search-input"></input>
      <div id="search-results" class="search-results"></div>
    </menu>
  {{- end -}}
  {{ if .Site.Params.header.languageMenu }}{{ partial "language-menu" . }}{{ end }}
  {{ if .Site.Params.header.shareMenu }}
    <menu id="share-menu" class="flyout-menu share-menu">
      {{ partial "share-buttons" . }}
    </menu>
  {{ end }}
</header>
